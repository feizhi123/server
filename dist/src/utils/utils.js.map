{"version":3,"sources":["../../../src/utils/utils.js"],"names":["getQueryStrings","query_string","query","window","location","href","split","vars","i","length","pair","decodeURIComponent","arr","push","setTitle","title","document","iframe","createElement","src","onload","setTimeout","body","removeChild","appendChild","formatDate","date","fmt","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","week","test","replace","RegExp","$1","getFullYear","substr","getDay","k","isObjectHasKeywords","obj","keywords","has","hasOwnProperty","property","indexOf","toUpperCase","compressImage","source_img_obj","quality","output_format","mime_type","cvs","width","naturalWidth","height","naturalHeight","ctx","getContext","drawImage","newImageData","toDataURL","result_image_obj","Image","dataURItoBlob","dataURI","byteString","atob","unescape","mimeString","ia","Uint8Array","charCodeAt","Blob","type","getFileSize","file","vm","reader","FileReader","image","e","data","target","result","console","log","readAsDataURL","copy2clipboard","msg","clipboard","ClipboardJS","$message","success","destroy","error","copy2clipboard2","txt","clipboardData","clearData","setData","navigator","userAgent","netscape","security","PrivilegeManager","enablePrivilege","alert","clip","Components","classes","createInstance","interfaces","nsIClipboard","trans","nsITransferable","addDataFlavor","str","Object","len","nsISupportsString","copytext","setTransferData","clipid","kGlobalClipboard"],"mappings":"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","file":"utils.js","sourcesContent":["export default {\n    getQueryStrings() {\n        var query_string = {};\n        var query = window.location.href.split(\"?\")[1];\n        if (query) {\n            var vars = query.split(\"&\");\n            for (var i = 0; i < vars.length; i++) {\n                var pair = vars[i].split(\"=\");\n                // If first entry with this name\n                if (typeof query_string[pair[0]] === \"undefined\") {\n                    query_string[pair[0]] = decodeURIComponent(pair[1]);\n                    // If second entry with this name\n                } else if (typeof query_string[pair[0]] === \"string\") {\n                    var arr = [query_string[pair[0]], decodeURIComponent(pair[1])];\n                    query_string[pair[0]] = arr;\n                    // If third or later entry with this name\n                } else {\n                    query_string[pair[0]].push(decodeURIComponent(pair[1]));\n                }\n            }\n        }\n        return query_string;\n    },\n    setTitle(title) {\n        document.title = title;\n        // hack在微信等webview中无法修改document.title的情况\n        let iframe = document.createElement('iframe');\n        iframe.src = 'http://www.baidu.com/favicon.ico';\n        iframe.onload = function () {\n            setTimeout(function () {\n                document.body.removeChild(iframe);\n            }, 0);\n        };\n        document.body.appendChild(iframe);\n    },\n    formatDate(date, fmt = 'YYYY-MM-DD HH:mm:ss') {\n        var o = {\n            'M+': date.getMonth() + 1,\n            'D+': date.getDate(),\n            'h+': date.getHours() % 12 === 0 ? 12 : date.getHours() % 12,\n            'H+': date.getHours(),\n            'm+': date.getMinutes(),\n            's+': date.getSeconds(),\n            'q+': Math.floor((date.getMonth() + 3) / 3),\n            'S': date.getMilliseconds()\n        }\n        var week = {\n            '0': '/u65e5',\n            '1': '/u4e00',\n            '2': '/u4e8c',\n            '3': '/u4e09',\n            '4': '/u56db',\n            '5': '/u4e94',\n            '6': '/u516d'\n        }\n        if (/(Y+)/.test(fmt)) {\n            fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length))\n        }\n        if (/(E+)/.test(fmt)) {\n            fmt = fmt.replace(RegExp.$1, ((RegExp.$1.length > 1) ? (RegExp.$1.length > 2 ? '/u661f/u671f' : '/u5468') : '') + week[date.getDay() + ''])\n        }\n        for (var k in o) {\n            if (new RegExp('(' + k + ')').test(fmt)) {\n                fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : (('00' + o[k]).substr(('' + o[k]).length)))\n            }\n        }\n        return fmt\n    },\n    isObjectHasKeywords(obj, keywords) {// 递归匹配obj 所有property 是否包含keywords\n        var has = false;\n        for (var k in obj) {\n            if (obj.hasOwnProperty(k)) {\n                var property = obj[k];\n                if (typeof property == \"object\") {\n                    has = isObjectHasKeywords(property, keywords)\n                } else {\n                    if (typeof property == 'number') {\n                        property += ''\n                    }\n                    if (property.indexOf && property.toUpperCase().indexOf(keywords.toUpperCase()) !== -1) {\n                        has = true;\n                    }\n                }\n                if (has) {\n                    break;\n                }\n            }\n        }\n        return has;\n    },\n    compressImage(source_img_obj, quality, output_format) {\n        var mime_type = \"image/jpeg\";\n        if (typeof output_format !== \"undefined\" && output_format == \"png\") {\n            mime_type = \"image/png\";\n        }\n\n        var cvs = document.createElement('canvas');\n        cvs.width = source_img_obj.naturalWidth;\n        cvs.height = source_img_obj.naturalHeight;\n        var ctx = cvs.getContext(\"2d\").drawImage(source_img_obj, 0, 0);\n        var newImageData = cvs.toDataURL(mime_type, quality / 100);\n        var result_image_obj = new Image();\n        result_image_obj.src = newImageData;\n        return result_image_obj;\n    },\n    dataURItoBlob(dataURI) {\n        // convert base64/URLEncoded data component to raw binary data held in a string\n        var byteString;\n        if (dataURI.split(',')[0].indexOf('base64') >= 0)\n            byteString = atob(dataURI.split(',')[1]);\n        else\n            byteString = unescape(dataURI.split(',')[1]);\n\n        // separate out the mime component\n        var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n\n        // write the bytes of the string to a typed array\n        var ia = new Uint8Array(byteString.length);\n        for (var i = 0; i < byteString.length; i++) {\n            ia[i] = byteString.charCodeAt(i);\n        }\n\n        return new Blob([ia], {type: mimeString});\n    },\n    getFileSize(file, vm) {\n        let reader = new FileReader();\n        let image = {};\n        reader.onload = function (e) {\n            let data = e.target.result;\n            console.log(data)\n            let image = new Image();\n            image.onload = function () {\n                vm.image.width = image.naturalWidth;\n                vm.image.height = image.naturalHeight;\n            }\n            image.src = data;\n        };\n        reader.readAsDataURL(file);\n        return image;\n    },\n\n    copy2clipboard(msg, vm) {\n        try {\n            var clipboard = new ClipboardJS('.btn');\n            vm.$message.success(msg)\n            clipboard.destroy();\n        } catch (e) {\n            vm.$message.error('复制失败')\n        }\n    },\n\n    copy2clipboard2(txt,msg,vm) {\n    if(window.clipboardData)\n    {\n        window.clipboardData.clearData();\n        window.clipboardData.setData(\"Text\",txt);\n        vm.$message.success(msg)\n    }\n    else if(navigator.userAgent.indexOf(\"Opera\") !== -1)\n    {\n        window.location = txt;\n        vm.$message.success(msg)\n    }\n    else if (window.netscape)\n    {\n        try {\n            netscape.security.PrivilegeManager.enablePrivilege(\"UniversalXPConnect\");\n        }\n        catch (e)\n        {\n            alert(\"被浏览器拒绝！\\n请在浏览器地址栏输入'about:config'并回车\\n然后将'signed.applets.codebase_principal_support'设置为'true'\");\n        }\n        var clip = Components.classes['@mozilla.org/widget/clipboard;1'].createInstance(Components.interfaces.nsIClipboard);\n        if (!clip) return;\n        var trans = Components.classes['@mozilla.org/widget/transferable;1'].createInstance(Components.interfaces.nsITransferable);\n        if (!trans) return;\n        trans.addDataFlavor('text/unicode');\n        var str = new Object();\n        var len = new Object();\n        var str = Components.classes[\"@mozilla.org/supports-string;1\"].createInstance(Components.interfaces.nsISupportsString);\n        var copytext = txt;\n        str.data = copytext;\n        trans.setTransferData(\"text/unicode\",str,copytext.length*2);\n        var clipid = Components.interfaces.nsIClipboard;\n        if (!clip) return false;\n        clip.setData(trans,null,clipid.kGlobalClipboard);\n        vm.$message.success(msg)\n    }\n}\n}\n"]}