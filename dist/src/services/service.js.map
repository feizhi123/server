{"version":3,"sources":["../../../src/services/service.js"],"names":["ERRORCODE","require","axios","defaults","baseURL","serviceDomain","interceptors","request","use","config","error","reject","response","resp","data","code","AUTHENTICATION_FAILED","push","path","SUCCESS","errorMsg","errorMessage","prototype","$message"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AACA,IAAMA,YAAYC,QAAQ,mBAAR,EAA6BD,SAA/C;;AAEA;AACAE,MAAMC,QAAN,CAAeC,OAAf,GAAyB,iBAAOC,aAAhC;;AAEAH,MAAMI,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAUC,MAAV,EAAkB;AAC/C;;AAEA,SAAOA,MAAP;AACD,CAJD,EAIG,UAAUC,KAAV,EAAiB;AAClB;AACA,SAAO,kBAAQC,MAAR,CAAeD,KAAf,CAAP;AACD,CAPD;;AASA;AACAR,MAAMI,YAAN,CAAmBM,QAAnB,CAA4BJ,GAA5B,CAAgC,UAAUK,IAAV,EAAgB;AAC9C,MAAGA,KAAKC,IAAL,CAAUC,IAAV,KAAmBf,UAAUgB,qBAAhC,EAAsD;AACpD;AACA,qBAAOC,IAAP,CAAY,EAAEC,MAAM,QAAR,EAAZ;AACD;AACD,MAAGL,KAAKC,IAAL,CAAUC,IAAV,KAAmBf,UAAUmB,OAAhC,EAAwC;AACtC,QAAIC,WAAWP,KAAKC,IAAL,CAAUO,YAAzB;AACA,QAAGD,QAAH,EAAY;AACV,oBAAIE,SAAJ,CAAcC,QAAd,CAAuBb,KAAvB,CAA6BU,QAA7B;AACD,KAFD,MAEK;AACD,oBAAIE,SAAJ,CAAcC,QAAd,CAAuBb,KAAvB,CAA6B,cAA7B;AACH;AACD,WAAO,kBAAQC,MAAR,CAAeE,IAAf,CAAP;AACD;AACD,SAAOA,IAAP;AACD,CAfD,EAeG,UAAUH,KAAV,EAAiB;AAClB;AACA,SAAO,kBAAQC,MAAR,CAAeD,KAAf,CAAP;AACD,CAlBD;;kBAoBeR,K","file":"service.js","sourcesContent":["import Vue from 'vue'\nimport config from '../config'\nimport router from '../router'\nconst ERRORCODE = require('../constants/code').ERRORCODE\n\n// Vue.prototype.$http = axios;\naxios.defaults.baseURL = config.serviceDomain;\n\naxios.interceptors.request.use(function (config) {\n  // Do something before request is sent\n\n  return config;\n}, function (error) {\n  // Do something with request error\n  return Promise.reject(error);\n});\n\n// Add a response interceptor\naxios.interceptors.response.use(function (resp) {\n  if(resp.data.code === ERRORCODE.AUTHENTICATION_FAILED){\n    //route to login\n    router.push({ path: '/login'})\n  }\n  if(resp.data.code !== ERRORCODE.SUCCESS){\n    let errorMsg = resp.data.errorMessage;\n    if(errorMsg){\n      Vue.prototype.$message.error(errorMsg);\n    }else{\n        Vue.prototype.$message.error('发生错误，请联系管理人员');\n    }\n    return Promise.reject(resp);\n  }\n  return resp;\n}, function (error) {\n  // Do something with response error\n  return Promise.reject(error);\n});\n\nexport default axios"]}